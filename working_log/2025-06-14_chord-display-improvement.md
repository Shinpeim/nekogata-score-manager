# 2025-06-14 コード譜表示の改善

## 作業概要
コード譜の表示方法を楽譜風のレイアウトに大幅改善し、より実用的で見やすい表示を実現した。

## 実装した機能

### 1. Tailwind CSS v4対応
- CSS記法を `@tailwind` から `@import "tailwindcss"` に変更
- `tailwind.config.js` ファイルを削除（v4では基本的に不要）
- PostCSS設定はそのまま維持

### 2. 8小節横並び表示
- デスクトップ: 8小節を1行に表示 (`sm:grid-cols-8`)
- モバイル: 4小節を1行に表示 (`grid-cols-4`)
- レスポンシブ対応で画面サイズに応じて自動調整

### 3. 楽譜風の罫線表示
- 下部罫線による小節の区切り表示
- 縦の小節線で各小節を明確に分離
- 左右の境界線で全体を枠囲み
- 従来の四角いボックスから音楽的な表記に変更

### 4. 拍数に応じたレイアウト
- 各コードの表示幅を拍数に比例させて配置
- 4拍コード: 100%幅、2拍コード: 50%幅
- 左詰めで正確な拍の位置を表現
- 複数コードが1小節にある場合の水平配置

### 5. コードネームとUI改善
- コードネームサイズを `text-xs` に縮小
- 拍数表示を下付きから右付きに変更（例: `F(2)`）
- 小節番号を上部に配置
- ホバー効果の維持

## 技術的詳細

### レイアウトアルゴリズム
```typescript
const widthPercentage = (chordDuration / beatsPerBar) * 100;
```
各コードの幅を拍数比で計算し、正確な音楽的配置を実現。

### CSS構造
- `absolute` positioning による罫線の重ね合わせ
- `flex` レイアウトによる小節内コード配置
- `relative` positioning による小節線の配置

### レスポンシブブレークポイント
- `sm:` (640px以上): 8小節表示
- デフォルト: 4小節表示

## UI/UX改善点

### Before
- 四角いボックスでの区切り表示
- 中央寄せのコード配置
- 縦並びの複数コード表示

### After
- 楽譜風の罫線と小節線
- 拍数に応じた正確な位置での左詰め配置
- 横並びでの複数コード表示
- より音楽的で実用的な見た目

## 次のステップ
- コード譜作成・編集機能の実装
- コード進行の分析機能
- エクスポート機能の追加

## 参考資料
- コード譜表記参考: https://genpudou.com/wp-content/uploads/2017/11/2017-11-24_04h12_17-734x1024.jpg
- 標準的な音楽コード譜の表記法に準拠